<div class="dashboard-layout">
  <!-- Header componente -->
  <app-header
    [isUserMenuOpen]="isUserMenuOpen"
    (toggleSidebar)="toggleSidebar()"
    (toggleUserMenu)="toggleUserMenu()"
    (closeUserMenu)="closeUserMenu()"
    (navigate)="onHeaderNavigate($event)"
    (logout)="logout()">
  </app-header>

  <!-- Overlay para cerrar menús en móvil -->
  <div
    class="overlay"
    [class.active]="isSidebarOpen || isUserMenuOpen"
    (click)="closeSidebar(); closeUserMenu()">
  </div>

  <!-- Componente Sidebar -->
  <app-sidebar
    [isSidebarOpen]="isSidebarOpen"
    (sidebarClose)="onSidebarClose()"
    (navigate)="onSidebarNavigate($event)">
  </app-sidebar>

  <!-- Contenido principal -->
  <main class="main-content">
    <div class="content-header">
      <h2>Bienvenido al Sistema</h2>
      <p *ngIf="userProfile() as profile" class="welcome-message">
        Hola <strong>{{ profile.username }}</strong>, tienes acceso como
        <span class="role-badge" [class.admin-badge]="profile.isAdmin" [class.user-badge]="!profile.isAdmin">
          {{ profile.isAdmin ? 'Administrador' : 'Usuario' }}
        </span>
      </p>
    </div>

    <!-- Cards de resumen -->
    <div class="dashboard-cards">
      <!-- Card de estadísticas -->
      <div class="dashboard-card stats-card">
        <div class="card-icon stats-icon">📊</div>
        <div class="card-content">
          <h3>Estadísticas</h3>
          <p>Revisa tu actividad y estadísticas de uso del sistema.</p>
          <button class="card-button" (click)="navigateTo('/dashboard/stats')">Ver Estadísticas</button>
        </div>
      </div>

      <!-- Card de documentos -->
      <div class="dashboard-card user-card">
        <div class="card-icon user-icon">📄</div>
        <div class="card-content">
          <h3>Mis Documentos</h3>
          <p>Accede a tus documentos y archivos personales.</p>
          <button class="card-button" (click)="navigateTo('/dashboard/documents')">Ver Documentos</button>
        </div>
      </div>

      <!-- Card de soporte -->
      <div class="dashboard-card support-card">
        <div class="card-icon support-icon">📞</div>
        <div class="card-content">
          <h3>Soporte</h3>
          <p>¿Necesitas ayuda? Contacta con nuestro equipo de soporte.</p>
          <button class="card-button" (click)="navigateTo('/dashboard/support')">Contactar</button>
        </div>
      </div>

      <!-- Card adicional para administradores -->
      <div class="dashboard-card admin-card" *appHasRole="'ROLE_ADMIN'">
        <div class="card-icon admin-icon">⚙️</div>
        <div class="card-content">
          <h3>Herramientas de Admin</h3>
          <p>Accede a las funciones administrativas del sistema.</p>
          <button class="card-button" (click)="navigateTo('/dashboard/admin-tools')">Ver Herramientas</button>
        </div>
      </div>
    </div>

    <!-- Sección de acciones rápidas -->
    <div class="quick-actions">
      <h3>Acciones Rápidas</h3>
      <div class="actions-grid">
        <!-- Acciones generales -->
        <div class="action-group">
          <button class="action-btn user-action" (click)="navigateTo('/dashboard/requests')">
            <span class="action-icon">📋</span>
            Nueva Solicitud
          </button>
          <button class="action-btn user-action" (click)="navigateTo('/dashboard/profile')">
            <span class="action-icon">🔧</span>
            Editar Perfil
          </button>
          <button class="action-btn user-action" (click)="navigateTo('/dashboard/settings')">
            <span class="action-icon">⚡</span>
            Configuración
          </button>
        </div>

        <!-- Acciones adicionales para administradores -->
        <div *appHasRole="'ROLE_ADMIN'" class="action-group">
          <button class="action-btn admin-action" (click)="navigateTo('/dashboard/manage-users')">
            <span class="action-icon">👥</span>
            Gestionar Usuarios
          </button>
          <button class="action-btn admin-action" (click)="navigateTo('/dashboard/reports')">
            <span class="action-icon">📈</span>
            Ver Reportes
          </button>
        </div>
      </div>
    </div>
  </main>
</div>
